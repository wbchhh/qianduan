<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>监听输入框值的变化(防抖)</title>
    <style>
            input {
                width: 498px;
                height: 50px;
                border: 1px solid #000;
                margin: 0 auto;
                display: block;
                padding: 0 0 0 20px;
                font-size: 20px;
            }
    </style>
</head>
<body>

    <input type="text" placeholder="请输入">

    <script>
        // 如果给input标签绑定oninput事件，
        // 在输入框输入值的时候，会频繁触发该事件

        // 1.0 获取元素
        var inpElement = document.getElementsByTagName("input")[0];
        // 2.0 事件绑定
        // inpElement.oninput = function(){
        //     // 3.0 this 是事件的调用者 
        //     console.log(this.value);
        // }

        // 事件监听
        // inpElement.addEventListener('input', function(){
        //     // 3.0 this 是事件的调用者 
        //     console.log(inpElement.value);
        // })



        // // 定义变量记录延迟函数
        // var delayer = null;
        // // 事件监听
        // inpElement.addEventListener('input', function(){
        //     // 3.0 this 是事件的调用者 
        //     // console.log(inpElement.value);
        //     // 判断变量是否有值 如果延迟函数变量有值，说明延迟函数正在执行，那么一直清除延迟函数
        //     if(delayer) clearTimeout(delayer);
        //     // 执行延迟函数（没有频繁触发事件的时候，执行延迟函数）
        //     // 事件被触发时，在300ms内，事件如果又被触发，那么会清除延迟函数，重新计时
        //     delayer = setTimeout(function(){
        //         // 获取输入的值
        //         console.log(inpElement.value);
        //     },300);
        // })


        // 定义变量记录延迟函数
        var delayer = null;
        // 事件监听
        inpElement.addEventListener('input', function(){
            fangdou(function(){
                // 获取输入的值
                console.log(inpElement.value);
            },300)
        })

        // 延迟函数
        // var delayer = setTimeout(fn,300)
        // clearTimeout(delayer)
        // 编写函数
        // function fangdou(fn,time){
        function debounce(fn,time){
            // 判断变量是否有值 如果延迟函数变量有值，说明延迟函数正在执行，那么一直清除延迟函数
            if(delayer) clearTimeout(delayer);
            // 执行延迟函数（没有频繁触发事件的时候，执行延迟函数）
            delayer = setTimeout(fn,time);
        }



        // 目标：防止事件被频繁触发
        // 回调函数(匿名函数)
    </script>
</body>
</html>